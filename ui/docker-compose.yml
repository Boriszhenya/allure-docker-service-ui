version: '3'

networks:
  allure-network:
    driver: bridge

services:
  allure:
    image: "allure-release"
    #image: "frankescobar/allure-docker-service:beta"
    environment:
      DEV_MODE: 0
      CHECK_RESULTS_EVERY_SECONDS: NONE
      KEEP_HISTORY: 1
      #KEEP_HISTORY_LATEST: 12
      SECURITY_USER: my_username
      SECURITY_PASS: my_password
      SECURITY_ENABLED: 0
      #TLS: 1
      #URL_PREFIX: /ivan
      #ACCESS_TOKEN_EXPIRES_IN_MINS: 1
      #ACCESS_TOKEN_EXPIRES_IN_SECONDS: 10

      #REFRESH_TOKEN_EXPIRES_IN_SECONDS: 10
      #REFRESH_TOKEN_EXPIRES_IN_DAYS: 1
    ports:
      - "5050:5050"
    volumes:
      #- ${PWD}/allure-results:/app/allure-results
      #- ${PWD}/allure-reports:/app/default-reports
      - ${PWD}/projects:/app/projects
      #- ${PWD}/build:/app/allure-docker-api/static/ui
    networks:
      - allure-network

  allure-ui:
    image: "allure-ui"
    environment:
      ALLURE_DOCKER_API_URL: "http://allure:5050"
      #ALLURE_DOCKER_API_URL_PREFIX: ""
      URL_PREFIX: "/thomas"
    ports:
      - "5252:5252"
    #command: bash -c "tail -f /dev/null"
    networks:
      - allure-network
